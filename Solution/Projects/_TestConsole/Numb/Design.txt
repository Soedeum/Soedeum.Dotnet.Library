tree Numb := list a as Assignment;

tree Assignment := leaf v, branch e as Equation;

tree Equation := branch t as Term, list ts as (leaf o, branch t as Term);

tree Term := if Variable then leaf
             if Number then leaf
             if EnclosedTerm then branch as EnclosedTerm;

tree EnclosedTerm := leaf s, branch e as Equation;



rule Numb := {Assignment}.a ;

rule Assignment := Variable.v Assignment.a Equation.e Semicolon.s;

rule Equation := Term.t {Operator.o Term.t}.ts ;

rule Operator := (Plus or Minus or Times or DivideBy or Exponent) ;

rule Term := (Variable or Number or EnclosedTerm) ;

rule EnclosedTerm := [Sign].s OpenParentheses.op Equation.e CloseParentheses.cp ;

rule Sign := (Plus or Minus) ;


token Number :=  Integer [ '.' +{numeric}  ] [ ('E' or 'e') Integer ] ;

subtoken Integer := ['+' or '-'] +{numeric} ;

token Variable := (Alpha or '_') +{alphanumeric or '_'} ;

token Plus := '+' ;

token Minus := '-' ;

token Times := '*' ;

token DivideBy := '/' ;

token PowerOf := '^' ;        

token Assign := ':=' ;

token OpenParentheses := '(' ;

token CloseParentheses := ')' ;

token Semicolon := ';' ;

skiptoken Whitespace := {whitespace} ;

skiptoken LineComment := '#'  ;


charset comment := not (eol or eof) ;

charset numeric := '0' to '9' ;

charset alpha := 'A' to 'Z' or 'a'..'z' ;

charset alphanumeric := alpha or numeric ;

charset eol := '\r' or '\n'

charset eof := '\0';

charset whitespace := ' ' or '\t' or eol ;
